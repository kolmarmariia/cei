На входе есть два файла:
1) "STN.csv" - список всех маршрутов агломерации с привязкой к line_id
Поля файла:
 - line_id
 - direction
 - route_numb
 - type_ts
 - route_long
 - is_circle
 - lenght_frw
 - length_bck
2) "stop_seq.csv" - список последовательностей остановок на маршрутах с привязкой к line_id
Поля файла:
- line_id
- direction
- stop_sequence  - посл.номер остановки
- stop_id
- stop_name
и др. неиспользуемые

Из файла "STN.csv" беру названия маршрутов
Прохожу по посл.остановок из файла "stop_seq.csv"
Записываю суммарное кол-во остановок на маршруте-варианте-направлении (М-В-Н)
И записываю последовательно названия остановок и их stop_id (а-ля 1-я остановка на маршруте 1 имеет stop_id=1,name="остановка")

Завожу хэш массив: связь (id1-id2) - маршруты, проходящие по связи
Дальше прохожу по всем М-В-Н ам
 записываю все межостановочные связи, имеющие место быть на маршрутах.
 Если эта связь встречалась на предыдущем маршруте, то приписываю новый маршрут к уже записанным на этой связи


 После первого прохода (когда всем связям приписали маршруты, нах-ся на них), 
 прохожу снова по всем М-В-Н ам
и для каждого маршрута (уже здесь отказываемся от направления!) подсчитываю кол-во пар, где этот маршрут проходит совместно с другими 

Дальше дла каждого маршрута рассчитывается коэфф. дублирования как (кол-во связей с др. маршрутами)/(суммарно кол-во связей) и записывается в файл "res_koeff.csv"
Параллельно записывается файл "res_DUBLY.csv" со всеми перечисленными связями и маршрутами, проходящими по этой связи





Цикл: 